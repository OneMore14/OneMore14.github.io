---
layout: post
title:  "CS168 Introduction to the Internet: Architecture and Protocols"
date:   2022-11-20 22:09:01 +0800
tags: "computer networking"
typora-root-url: ../../../
---



course wbe site https://cs168.io/



# 1. Introduction



# 2. Overview: How the Internet Works



# 3. Architectural Principles



# 4. Design Goals and History



# 5. Routing: Fundamentals 



# 6.  Routing: Approaches I

路由协议分两种

IGP (Interior Gateway Protocols)  用于单一网络(Autonomous System)中

### Distance-Vector Routing Protocols

属于IGP，典型就是RIP(Routing Information Protocol)。基本原理是router之间定期交换各自的路由信息，然后更新最近的路由(跳数最少)。Router的路由表中的信息也有存活时间限制，一段时间不更新后路由信息失效。



EGP (Exterior Gateway Protocols)，用于多个网络间通信。



# 7. Routing: Approaches II

## Distance-Vector: Poison

当一个router发现一条路由信息失效后，会广播其他router这条路由失效，对应的其他router也将与之相关的路由信息提前主动设置成失效，并继续传播失效信息。

## Link-State Routing

* IS-IS (Intermediate System to Intermediate System) 
* OSPF  (Open Shortest Path First) 

核心思想是每个router向全网广播自己的链接信息。这样每个router有全网的link的数据，再用最短路算法可以求出距离最近的下一跳。概念简单但是细节会比较复杂。

#### Distance-Vector

* Global computation (it’s distributed across all nodes)
*  using local data (from just itself and its neighbors) 

#### Link-State 

* Local computation
* using global data (from all parts of the network)

## Learning Switches 

Distance-Vector 和 Link-State protocols都需要为终端设置静态路由，而且这两个协议主要用于Network layer

Learning Switches不需要提前设置终端路由，且主要用于link layer。核心思想是在没有路由信息的时候广播packet，路由表的建立也是从packet里提取信息。

Learning Switches裸的算法遇到环会无限flood，解决办法是在这些router中生成一个有向最小生成树，这样一定没有环。

# 8. Addressing

IP地址本来也是分network:host的，只不过一开始固定network是前8位，之后又改为A B C三类，最后采用了CIDR。

CIDR: Classless Inter-Domain Routing. 为什么叫CIDR，因为先有classful addresing，也就是A，B，C三级分类，但不实用。



AS  Autonomous Systems

AS间的路由和IGP很不一样，需要遵循商业模型，并不完全按最短路来路由。每个AS还有一个ASN

* eBGP BGP sessions between border routers in different ASes
* iBGP  BGP sessions between border routers and other routers within the same AS



